#!/usr/bin/env bash

set -e

function main() {
  install_packages
  install_bash_it
  install_space_vim
  install_lastpass_cli
  install_kubectl
  install_minikube
}

function install_packages() {
  "$HOME"/bin/install-packages
}

function install_bash_it() {
  if [[ -d "$HOME"/.bash_it ]];
  then
    echo "bash-it already installed; skipping"
    return
  fi

  git clone --depth=1 https://github.com/Bash-it/bash-it.git "$HOME"/.bash_it
  "$HOME"/.bash_it/install.sh
}

function install_space_vim() {
  bash <(curl -fsSL https://git.io/vFUhE)
}

function install_lastpass_cli() {
  # git clone --depth=1 https://github.com/lastpass/lastpass-cli.git "$HOME"/workspace/lastpass-cli
  pushd "$HOME"/workspace/lastpass-cli
    make
    sudo make install
  popd
}

function install_kubectl() {
  curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
  chmod +x ./kubectl
  sudo mv ./kubectl /usr/local/bin/
}

function install_minikube() {
  curl -Lo minikube https://storage.googleapis.com/minikube/releases/v0.25.0/minikube-linux-amd64
  chmod +x ./minikube
  sudo mv ./minikube /usr/local/bin/
}

main
